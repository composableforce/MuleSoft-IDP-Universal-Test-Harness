#%RAML 1.0
title: MuleSoft IDP Universal üåê Test Harness
version: v1
mediaType: application/json
protocols: HTTPS

baseUri: https://{host}/api/{version}
baseUriParameters:
  host:
    type: string
    example: mulesoft-idp-universal-test-harness-uupas5.m3jzw3-1.deu-c1.cloudhub.io

securedBy: mulesoft-basic-auth

/webapp:
  get:
    displayName: Webapp Home Page
    responses:
      "200":
        body:
          text/html:
            description: Index HTML Page
  /upload:
    post:
      displayName: Webapp File Upload
      body:
        multipart/form-data:
          fileTypes:
            - image/png
            - image/jpeg
            - application/pdf

  /actions/{actionId}/versions:
    uriParameters:
      actionId:
        type: field-actionId
    get:
      responses:
        "200":
          body:
            application/json:
              items:
                properties:
                  id:
                    example: 1.1.0
                    type: string
                  name:
                    example: 1.0.0 - PUBLISHED
                    type: string
    /{actionVersion}/executions/{executionId}:
      uriParameters:
        actionVersion:
          type: field-actionVersion
        executionId:
          type: field-executionId
      get:
        responses:
          "200":
            body:
              application/json:



securitySchemes:
  mulesoft-basic-auth:
    displayName: üõ°Ô∏è MuleSoft Basic Authentication
    type: Basic Authentication
    description: | 
      ### [Basic Authentication: Simple Policy](https://docs.mulesoft.com/gateway/latest/policies-included-basic-auth-simple) Enforces authentication according to the details configured in a security manager policy

types: # Considered use of Library, but the dependency was deemed to hinder adoption
  field-actionId:
    description: |-
      IDP Document Action Id 

      Published Document Action UUID
    example: 90c3e286-72b5-42ca-92d0-22f86ea8d766
    type: string
    pattern: "[{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?"
  field-actionVersion:
    displayName: IDP Document Action Id Version
    description: Document Action Version like 1.0.0
    default: 1.1.0
    example: 1.1.0
    type: string
    pattern: ^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9A-Za-z-][0-9A-Za-z-]*)(?:\.(?:0|[1-9A-Za-z-][0-9A-Za-z-]*))*))?(?:\+([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?$
  field-executionId:
    displayName: IDP Execution Id
    description: IDP Execution Id returned after successful submission
    default: 022c61de-9bfc-4a94-8a9c-43c5f8ac153e
    example: 022c61de-9bfc-4a94-8a9c-43c5f8ac153e
    type: string
    pattern: ^[{]?[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}[}]?$
  field-ExecutionStatus:
    displayName: IDP Execution Status
    description: |
      ## [Execution Results Reference](https://docs.mulesoft.com/idp/automate-document-processing-with-the-idp-api#execution-status-reference).

      When you query the results of an execution, the IDP API returns the status which can be any of the following:

      - `ACKNOWLEDGED`: The document action execution request was received.
      - `IN_PROGRESS`: The execution started.
      - `RESULTS_PENDING`: The execution finished and IDP is processing the results.
      - `MANUAL_VALIDATION_REQUIRED`: The execution finished but the results need manual validation.
      - `FAILED`: The execution request finished unsuccessfully.
      - `PARTIAL_SUCCESS`: The execution request finished but some sub-tasks failed.
      - `SUCCEEDED`: The execution request finished successfully.
    default: IN_PROGRESS
    enum:
      - ACKNOWLEDGED
      - IN_PROGRESS
      - RESULTS_PENDING
      - MANUAL_VALIDATION_REQUIRED
      - FAILED
      - PARTIAL_SUCCESS
      - SUCCEEDED
    example: IN_PROGRESS
    type: string

  object-DocumentExecutionGetResponse:
    displayName: IDP Retrieve Execution Response Object
    type: object
    description:
    properties:
      pages?:
        type: array
        items: object-Page
      id?:
        type: field-executionId
      documentName?:
        type: string
      prompts?:
        type: object-Prompt
      status?:
        type: field-ExecutionStatus
  object-Page:
    displayName: IDP Retrieve Execution Response Page Object
    type: object
    properties:
      tables?:
        type: object
        properties: {}
      page?:
        type: string
      fields?:
        type: object
        properties: {}
      prompts?:
        type: object-Prompt
  object-Prompt:
    displayName: IDP Retrieve Execution Response Prompt Object
    type: object
    properties:
      answer?: object-Field
      source?:
        type: string
      prompt?:
        type: string
  object-Field:
    displayName: IDP Retrieve Execution Response Field Object
    type: object
    properties:
      value?:
        type: string
      geometry?:
        type: object
        properties:
          height:
            type: number
            required: false
          left:
            type: number
            required: false
          width:
            type: number
            required: false
          top:
            type: number
            required: false
      confidenceScore?:
        type: number

description: |

  protocols: HTTPS

  securedBy: üõ°Ô∏è MuleSoft Basic Authentication

  | Author | Date | Description
  | -------- | ------- | ------- |
  | G.Jeffcock | 23rd June 2024 | Launched| 
  |||| 
  ||||

  ### MuleSoft IDP Universal üåê Test Harness

  This webpage serves as a tool to interact with MuleSoft's IDP Universal platform. It's designed to help manage and test various operations related to document processing and integration tasks.

  #### Key Features:

  1. **Upload Documents:**
    - You can upload files through a form on the page. Before uploading, you need to select specific options related to the type of document action and its version.

  2. **Interactive Interface:**
    - The webpage dynamically updates as you interact with it. For instance, it provides feedback on the status of file uploads and other operations.

  3. **Feedback and Error Handling:**
    - It displays messages to inform you about the progress of tasks, such as loading documents and handling errors that might occur during the process.

  4. **Monitoring Progress:**
    - There's a visual progress bar that shows how far along a task is in its completion. This helps in understanding the current status of the operations being performed.

  5. **External Task Review:**
    - You can access an external link to review tasks related to MuleSoft IDP, allowing you to manage and monitor tasks externally from this webpage.

  #### Why It's Useful:

  - **Testing and Integration:** This tool is essential for developers and IT professionals who work with MuleSoft. It provides a controlled environment to test document processing and integration workflows.
    
  - **User-Friendly:** Despite its technical functionality, the webpage is designed to be user-friendly, making it accessible for those involved in managing business processes rather than just programming.

  - **Efficiency:** By centralizing document actions and their versions, it streamlines the management of tasks and enhances the efficiency of operations, ensuring tasks are completed smoothly and accurately.

  ---

  In summary, this webpage acts as a central hub for managing document-related tasks within the MuleSoft ecosystem, offering tools for uploading files, monitoring progress, handling errors, and accessing task reviews externally. It's designed to simplify the complexities of integration and task management while providing clear feedback on operations.